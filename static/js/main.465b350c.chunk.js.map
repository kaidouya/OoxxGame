{"version":3,"sources":["SvgLine.js","Ooxx.js","index.js"],"names":["SvgBody","styled","svg","_templateObject","props","_props$children$props","children","x1","x2","y1","y2","d","Math","sqrt","console","log","SvgLine","_this","Object","classCallCheck","this","positionInfo","possibleConstructorReturn","getPrototypeOf","call","winnerGroup","state","startX","slice","startY","floor","endX","endY","react_default","a","createElement","className","stroke","strokeWidth","Component","CheckerBoard","div","Ooxx_templateObject","BoxBody","span","_templateObject2","Player","_templateObject3","PlayerSpan","_templateObject4","ResetBtn","button","_templateObject5","winnerLine","giveOx","n","Ooxx","resetBtn","setState","preState","boxArray","winner","whichPlay","index","_this2","newBoxArray","toConsumableArray","grid","_i","_winnerLine","length","items","_items","slicedToArray","i","j","k","w1","w2","prevProps","getWinnerInfo","whosWinner","_this3","_this$state","react","map","element","key","onClick","clickHandle","bind","src_SvgLine","ReactDOM","render","src_Ooxx","document","getElementById"],"mappings":"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","file":"static/js/main.465b350c.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst SvgBody = styled.svg`\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 450px;\r\n  height: 450px;\r\n  .line {\r\n    stroke-dasharray: 0 1000;\r\n    animation: dasharray 1s forwards;\r\n  }\r\n  @keyframes dasharray {\r\n    from {\r\n      stroke-dasharray: 0 1000;\r\n    }\r\n    to {\r\n      stroke-dasharray: ${props => {\r\n          // 自己來算兩點之間的距離\r\n          let { x1, x2, y1, y2 } = props.children.props;\r\n          let d = Math.sqrt((x2 -= x1) * x2 + (y2 -= y1) * y2);\r\n          console.log('兩點之間的距離:' + d);\r\n          return d;\r\n        }}\r\n        1000;\r\n    }\r\n  }\r\n`;\r\n\r\nclass SvgLine extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let positionInfo = this.props.winnerGroup;\r\n\r\n    console.log('這些格子取得勝利：' + positionInfo);\r\n    this.state = {\r\n      positionInfo: positionInfo\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const number01 = 148; // 方格的寬\r\n    const number02 = 74; // 方格寬的一半\r\n    const startX = this.state.positionInfo.slice(0, 1) % 3;\r\n    const startY = Math.floor(this.state.positionInfo.slice(0, 1) / 3);\r\n    const endX = this.state.positionInfo.slice(-1) % 3;\r\n    const endY = Math.floor(this.state.positionInfo.slice(-1) / 3);\r\n    console.log(\r\n      '開始位置x：' +\r\n        (startX * number01 + number02) +\r\n        '開始位置Y：' +\r\n        (startY * number01 + number02)\r\n    );\r\n    console.log(\r\n      '結束位置x：' +\r\n        (endX * number01 + number02) +\r\n        '結束位置Y：' +\r\n        (endY * number01 + number02)\r\n    );\r\n    console.log('好難算阿 ㄇㄉ勒');\r\n    return (\r\n      <SvgBody>\r\n        <line\r\n          className='line'\r\n          x1={startX * number01 + number02}\r\n          y1={startY * number01 + number02}\r\n          x2={endX * number01 + number02}\r\n          y2={endY * number01 + number02}\r\n          stroke='red'\r\n          strokeWidth='5'\r\n        />\r\n      </SvgBody>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SvgLine;\r\n","import React, { Component, Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport SvgLine from './SvgLine';\r\n\r\nconst CheckerBoard = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  align-content: flex-start;\r\n  width: 450px;\r\n  height: 450px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst BoxBody = styled.span`\r\n  flex-basis: 33%;\r\n  height: 33%;\r\n  border: 1px solid #ccc;\r\n  margin: -1px 0 0 -1px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: sans-serif;\r\n  font-size: 60px;\r\n  color: #666;\r\n  cursor: pointer;\r\n  user-select: none;\r\n`;\r\n\r\nconst Player = styled.span`\r\n  display: block;\r\n  color: #0cc;\r\n  font-size: 1rem;\r\n  text-align: center;\r\n`;\r\n\r\nconst PlayerSpan = styled(Player)`\r\n  display: inline-block;\r\n  color: #85bf21;\r\n  font-weight: bold;\r\n  font-size: 2rem;\r\n`;\r\n\r\nconst ResetBtn = styled.button`\r\n  display: block;\r\n  margin: 20px auto 0;\r\n  width: 300px;\r\n  height: 50px;\r\n  color: #555;\r\n  border-radius: 15px;\r\n`;\r\n\r\n// 成功連線有哪些組合\r\nconst winnerLine = [\r\n  [0, 1, 2],\r\n  [3, 4, 5],\r\n  [6, 7, 8],\r\n  [0, 3, 6],\r\n  [1, 4, 7],\r\n  [2, 5, 8],\r\n  [0, 4, 8],\r\n  [2, 4, 6]\r\n];\r\n\r\n// 丟值函式\r\nconst giveOx = n => {\r\n  switch (n) {\r\n    case 0:\r\n      return '';\r\n    case 1:\r\n      return '0';\r\n    case -1:\r\n      return 'X';\r\n    default:\r\n      return '';\r\n  }\r\n};\r\n\r\nclass Ooxx extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      boxArray: [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      whichPlay: 1,\r\n      winner: null,\r\n      winnerGroup: [] // 獲勝組合\r\n    };\r\n  }\r\n\r\n  // 點擊事件\r\n  clickHandle(index) {\r\n    if (this.state.winner !== null) return;\r\n    const newBoxArray = [...this.state.boxArray];\r\n    // 防止重複點擊\r\n    if (newBoxArray[index] !== 0) {\r\n      return;\r\n    }\r\n    newBoxArray[index] = this.state.whichPlay;\r\n    this.setState(preState => {\r\n      return {\r\n        boxArray: newBoxArray,\r\n        whichPlay: -this.state.whichPlay\r\n      };\r\n    });\r\n  }\r\n\r\n  // 檢查是否已經出現贏家 + 並且記錄是哪種組合所勝出\r\n  whosWinner() {\r\n    const grid = this.state.boxArray;\r\n    for (const items of winnerLine) {\r\n      const [i, j, k] = items;\r\n      if (grid[i] === grid[j] && grid[j] === grid[k] && grid[i] !== 0) {\r\n        return {\r\n          w1: grid[i],\r\n          w2: [i, j, k]\r\n        };\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // 重新開始\r\n  resetBtn = () => {\r\n    this.setState(preState => {\r\n      return {\r\n        boxArray: [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        winner: null\r\n      };\r\n    });\r\n  };\r\n\r\n  // 當更新時檢查是否已經結束\r\n  componentDidUpdate(prevProps, preState) {\r\n    // 防止無窮迴圈\r\n    if (preState.boxArray !== this.state.boxArray) {\r\n      // 確認是否有贏家出現\r\n      const getWinnerInfo = this.whosWinner();\r\n      if (getWinnerInfo !== null) {\r\n        this.setState(preState => {\r\n          return {\r\n            winner: getWinnerInfo.w1,\r\n            winnerGroup: getWinnerInfo.w2\r\n          };\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { boxArray, whichPlay, winner, winnerGroup } = this.state;\r\n    return (\r\n      <Fragment>\r\n        <CheckerBoard>\r\n          {boxArray.map((element, index) => {\r\n            return (\r\n              <BoxBody key={index} onClick={this.clickHandle.bind(this, index)}>\r\n                {giveOx(element)}\r\n              </BoxBody>\r\n            );\r\n          })}\r\n          {winner !== null ? <SvgLine winnerGroup={winnerGroup} /> : null}\r\n        </CheckerBoard>\r\n        <Player>\r\n          現在是誰在玩：\r\n          <PlayerSpan>\r\n            {winner !== null ? '結束了啦！' : giveOx(whichPlay)}\r\n          </PlayerSpan>\r\n        </Player>\r\n        <Player>\r\n          目前贏家是：<PlayerSpan>{giveOx(winner)}</PlayerSpan>\r\n        </Player>\r\n        <ResetBtn onClick={this.resetBtn}>重新開始</ResetBtn>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Ooxx;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Ooxx from './Ooxx';\r\n\r\nReactDOM.render(<Ooxx />, document.getElementById('root'));\r\n"],"sourceRoot":""}